/*
 * Distance.js - 0.0.6 
 * Author : Jacob Lowe <http://jacoblowe.me> 
 */

!function(a){var b=function(a,c){return this instanceof b?(this.unit=a,this._radius=this.Int(c)||6378.1,this):new b(a)};b.prototype.Radius=function(a){return a*Math.PI/180},b.prototype.Int=function(a){return parseFloat(a)},b.prototype.from=function(a){if("object"==typeof a&&a.length){if(a[0].length&&"object"==typeof a[0]){this.start=[];for(var b=0;b<a.length;b+=1){var c=a[b];this.start.push([this.Int(c[0]),this.Int(c[1])])}this.multi=1}else this.start=[this.Int(a[0]),this.Int(a[1])];return this.destination?this.calculate():this}throw new Error("Distance.from() arguments need to be an array eg. [lat, lng] or [[lat, lng], [lat, lng]]")},b.prototype.to=function(a){if("object"==typeof a&&a.length)return this.destination=[this.Int(a[0]),this.Int(a[1])],this.start?this.calculate():this;throw new Error("Distance.to() arguments need to be an array eg. [lat, lng]")},b.prototype.get=function(a,b){var c=this.Radius(b[0]-a[0]),d=this.Radius(b[1]-a[1]),e=this.Radius(a[0]);b[0]=this.Radius(b[0]);var f=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(d/2),2)*Math.cos(e)*Math.cos(b[0]),g=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return this._radius*g},b.prototype.calculate=function(){if(this.multi){for(var a=[],b=0;b<this.start.length;b+=1)a.push(this.get(this.start[b],this.destination));return a}return this.get(this.start,this.destination)},a.Distance=b}(this),function(){var a=function(b){if(!(this instanceof a))return new a(b);var c=this;this.base=parseFloat(b),this.units={},this.units.kilometer=function(){return c.base},this.units.miles=function(){return.621371*c.base},this.units.feet=function(){return 3280.84*c.base}},b=function(b){b._convertUnit=a(b.valueOf())};Number.prototype.unit=function(a){return this._convertUnit||b(this),this._convertUnit.units[a]()},Array.prototype.unit=function(a){for(var b=[],c=0;c<this.length;c+=1)b.push(parseFloat(this[c]).unit(a));return b}}(this);