/*
 * Distance.js - 0.0.6 
 * Author : Jacob Lowe <http://jacoblowe.me> 
 */

(function(t){var i=function(t){return this instanceof i?(this.unit=t,this.earthRadius=6378.1,void 0):new i(t)};i.prototype.Radius=function(t){return t*Math.PI/180},i.prototype.Int=function(t){return parseFloat(t)},i.prototype.from=function(t){if("object"==typeof t&&t.length){if(t[0].length&&"object"==typeof t[0]){this.start=[];for(var i=0;t.length>i;i+=1){var n=t[i];this.start.push([this.Int(n[0]),this.Int(n[1])])}this.multi=1}else this.start=[this.Int(t[0]),this.Int(t[1])];return this.destination?this.calculate():this}throw Error("Distance.from() arguments need to be an array eg. [lat, lng] or [[lat, lng], [lat, lng]]")},i.prototype.to=function(t){if("object"==typeof t&&t.length)return this.destination=[this.Int(t[0]),this.Int(t[1])],this.start?this.calculate():this;throw Error("Distance.to() arguments need to be an array eg. [lat, lng]")},i.prototype.get=function(t,i){var n=this.Radius(i[0]-t[0]),r=this.Radius(i[1]-t[1]),e=this.Radius(t[0]);i[0]=this.Radius(i[0]);var s=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(e)*Math.cos(i[0]),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.earthRadius*o},i.prototype.calculate=function(){if(this.multi){for(var t=[],i=0;this.start.length>i;i+=1)t.push(this.get(this.start[i],this.destination));return t}return this.get(this.start,this.destination)},t.Distance=i})(this),function(){Number.prototype.kilometer=function(){return this.converted=!0,this.valueOf()},Number.prototype.miles=function(){return this.converted=!0,.621371*this.valueOf()},Number.prototype.feet=function(){return this.converted=!0,3280.84*this.valueOf()},Number.prototype.unit=function(t){if(this[t]&&!this.converted)return this[t]();throw Error("One one conversion is possible at this time")},Array.prototype.unit=function(t){for(var i=[],n=0;this.length>n;n+=1)i.push(parseFloat(this[n]).unit(t));return i}}(this);