/*
 * Distance.js - 0.0.3 
 * Author : Jacob Lowe <http://jacoblowe.me> 
 */

(function(t){var i=function(t){return this instanceof i?(this.unit=t,this.earthRadius=6371,void 0):new i(t)};i.prototype.Radius=function(t){return t*Math.PI/180},i.prototype.Int=function(t){return parseFloat(t)},i.prototype.from=function(t){if("object"==typeof t&&t.length){if(t[0].length){this.start=[];for(var i=0;t.length>i;i+=1){var n=t[i];this.start.push([this.Int(n[0]),this.Int(n[0])])}this.multi=1}else this.start=[this.Int(t[0]),this.Int(t[1])];return this.destination?this.calculate():this}throw Error("Distance.from() arguments need to be an array eg. [lat, lng] or [[lat, lng], [lat, lng]]")},i.prototype.to=function(t){if("object"==typeof t&&t.length)return this.destination=[this.Int(t[0]),this.Int(t[1])],this.start?this.calculate():this;throw Error("Distance.to() arguments need to be an array eg. [lat, lng]")},i.prototype.near=function(t){return this.start=[this.Int(t[0]),this.Int(t[1])],this.calculate()},i.prototype.get=function(t,i,n){var s=this.Radius(i[0]-t[0]),o=this.Radius(i[1]-t[1]);t[0]=this.Radius(t[0]),i[0]=this.Radius(i[0]);var a=Math.sin(s/2)*Math.sin(s/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(t[0])*Math.cos(i[0]),e=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),r=this.earthRadius*e;return 1e3*(Math.round(r*Math.pow(10,n))/Math.pow(10,n))},i.prototype.calculate=function(){if(this.multi){for(var t=[],i=0;this.destination.length>i;i+=1)t.push(this.get(this.start,this.destination,2));return t}return this.get(this.start,this.destination,2)},i.prototype.unit=function(t){this.unit=t},t.Distance=i})(this),function(){Boolean.prototype.kilometer=function(){},Boolean.prototype.miles=function(){},Boolean.prototype.feet=function(){}}(this);