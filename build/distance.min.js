/*
 * Distance.js - 0.0.6 
 * Author : Jacob Lowe <http://jacoblowe.me> 
 */

(function(t){var i=function(t){return this instanceof i?(this.unit=t,this.earthRadius=6378.1,this):new i(t)};i.prototype.Radius=function(t){return t*Math.PI/180},i.prototype.Int=function(t){return parseFloat(t)},i.prototype.from=function(t){if("object"==typeof t&&t.length){if(t[0].length&&"object"==typeof t[0]){this.start=[];for(var i=0;t.length>i;i+=1){var n=t[i];this.start.push([this.Int(n[0]),this.Int(n[1])])}this.multi=1}else this.start=[this.Int(t[0]),this.Int(t[1])];return this.destination?this.calculate():this}throw Error("Distance.from() arguments need to be an array eg. [lat, lng] or [[lat, lng], [lat, lng]]")},i.prototype.to=function(t){if("object"==typeof t&&t.length)return this.destination=[this.Int(t[0]),this.Int(t[1])],this.start?this.calculate():this;throw Error("Distance.to() arguments need to be an array eg. [lat, lng]")},i.prototype.get=function(t,i){var n=this.Radius(i[0]-t[0]),s=this.Radius(i[1]-t[1]),r=this.Radius(t[0]);i[0]=this.Radius(i[0]);var e=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(r)*Math.cos(i[0]),a=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return this.earthRadius*a},i.prototype.calculate=function(){if(this.multi){for(var t=[],i=0;this.start.length>i;i+=1)t.push(this.get(this.start[i],this.destination));return t}return this.get(this.start,this.destination)},t.Distance=i})(this),function(){var t=function(i){if(!(this instanceof t))return new t(i);var n=this;this.base=parseFloat(i),this.units={},this.units.kilometer=function(){return n.base},this.units.miles=function(){return.621371*n.base},this.units.feet=function(){return 3280.84*n.base}},i=function(i){i._convertUnit=t(i.valueOf())};Number.prototype.unit=function(t){return this._convertUnit||i(this),this._convertUnit.units[t]()},Array.prototype.unit=function(t){for(var i=[],n=0;this.length>n;n+=1)i.push(parseFloat(this[n]).unit(t));return i}}(this);